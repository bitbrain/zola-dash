{% extends "base.html" %}

{% import "macros.html" as macros %}

{% block head_extend %}
    <title>{{ page.title }} | {{ config.title }}</title>
    {# fediverse:creator meta for Mastodon if configured #}
    {% set_global mastodon_url = "" %}
    {% if config.extra.social %}
        {% for s in config.extra.social %}
            {% if mastodon_url == "" %}
                {% if s.url and (s.url | split(pat="/@") | length) > 1 %}
                    {% set_global mastodon_url = s.url %}
                {% endif %}
            {% endif %}
        {% endfor %}
    {% endif %}
    {% if config.extra.mastodon_url and mastodon_url == "" %}
        {% set_global mastodon_url = config.extra.mastodon_url %}
    {% endif %}
    {% if mastodon_url %}
        {% set parts = mastodon_url | trim_end_matches(pat="/") | split(pat="/@") %}
        {% if parts | length == 2 %}
            {% set instance = parts | first | trim_start_matches(pat="https://") | trim_start_matches(pat="http://") %}
            {% set handle = parts | last %}
            <meta name="fediverse:creator" content="@{{ handle }}@{{ instance }}">
        {% endif %}
    {% endif %}
{% endblock head_extend %}

{% block content %}
    {{ macros::header(components=page.components, is_page=true) }}
    <div class="container mb-16">
        <div class="mt-4 font-serif text-slate-600 dark:text-slate-500 text-4xl lg:text-base">
            {{ page.date | date(format="%Y-%m-%d") }}
        </div>
        <h1 class="w-full mt-4 mb-8 font-serif text-8xl lg:text-4xl text-slate-900 dark:text-slate-300">
            {{ page.title }}
        </h1>
        <div class="w-100 border-t mb-8 border-slate-300 dark:border-slate-700"></div>
        <div class="prose-boring">
            {{ page.content | safe }}
        </div>
    </div>
{% endblock content %}
